---
layout: post
title: AWS入門
date: 2015-11-08 00:00:00
---

## まえがき

『Amazon Web Services 基礎からネットワーク&サーバー構築』を何度か読みました。

そして、AWSマネジメントコンソールでサブネット、ルートテーブル、インスタンス、セキュリティグループを作成・削除しました。

そのことをざっくりと紹介します。

## サブネット

CIDRブロックを指定するので、一応、CIDR表記をおさらいしました。

## ルートテーブル

ルートテーブルをサブネットに適用するためには、ルートテーブルをサブネットに関連付けます。

VPC領域にルータソフトウェアがあり、サブネットにルートテーブルを適用します。

ルータにルートテーブルがあると勘違いしていて、少し理解に手間取りました。

デフォルトの設定は、VPC領域にあるプライベートIPアドレス宛のパケットをそのプライベートIPアドレスがあるサブネットに転送する設定です。

デフォルトの設定だと、インターネット宛のパケット(VPC領域にあるプライベートIPアドレス宛のパケット以外)は破棄されます。

そのためインターネット宛のパケットは破棄され、インターネットと通信することができません。

インターネットと通信するために、インターネット宛のパケットをインターネットゲートウェイに転送するように設定しました。これはデフォルトゲートウェイと呼ばれる設定です。

デフォルトゲートウェイでは、インターネット宛のパケットをNATサーバに転送することもあります。

## インスタンス

いろいろと設定しました。道なりに進めてインスタンスを作成することができました。

## セキュリティグループ

セキュリティグループはファイアーウォールです。

インスタンスに入っていくパケットを許可する設定をインバウンドで設定します。

インスタンスから出ていくパケットを許可する設定をアウトバウンドで設定します。

送信先(CIDRブロック)、送信元(CIDRブロック)、プロトコル、ポート番号などで許可するパケットを指定します。

サブネット間で通信するためには、インバウンドで設定します。

## あとがき

他にもたくさんのサービスがあります。地道に経験を積みたいと思います。

目標は次の２つでしょうか。

- AWS CLIで手作業を自動化すること
- Ansibleでプロビジョニング・デプロイすること
- クラウドデザインパターンなどを参考にしてインフラを設計すること
